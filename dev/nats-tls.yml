---
- type: remove
  path: /releases/name=bosh/sha1

- type: remove
  path: /releases/name=bosh/version

- type: replace
  path: /releases/name=bosh/url
  value: file://((custom_bosh_tgz_path))

- type: remove
  path: /instance_groups/name=bosh/jobs/name=nats

- type: replace
  path: /instance_groups/name=bosh/jobs/-
  value:
    name: gonats
    release: bosh
    properties:
      gonats:
        listen_address: ((internal_ip))
        user: nats
        password: ((nats_password))
        certificate: ((nats_ssl.certificate))
        private_key: ((nats_ssl.private_key))

- type: replace
  path: /instance_groups/name=bosh/properties/nats?/cert/ca
  value: ((nats_ssl.ca))

- type: replace
  path: /variables/-
  value:
    name: nats_ssl
    type: certificate
    options:
      ca: default_ca
      common_name: ((internal_ip))
      alternative_names: [((internal_ip))]

